!function(c){"use strict";var l=function(t,i){this.options=c.extend({},l.DEFAULTS,i),this.$target=c(this.options.target).on("scroll.bs.affix.data-api",c.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",c.proxy(this.checkPositionWithEventLoop,this)),this.$element=c(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function e(s){return this.each(function(){var t=c(this),i=t.data("bs.affix"),e="object"==typeof s&&s;i||t.data("bs.affix",i=new l(this,e)),"string"==typeof s&&i[s]()})}l.VERSION="3.3.5",l.RESET="affix affix-top affix-bottom",l.DEFAULTS={offset:0,target:window},l.prototype.getState=function(t,i,e,s){var o=this.$target.scrollTop(),n=this.$element.offset(),a=this.$target.height();if(null!=e&&"top"==this.affixed)return o<e&&"top";if("bottom"==this.affixed)return null!=e?!(o+this.unpin<=n.top)&&"bottom":!(o+a<=t-s)&&"bottom";var r=null==this.affixed,c=r?o:n.top;return null!=e&&o<=e?"top":null!=s&&t-s<=c+(r?a:i)&&"bottom"},l.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(l.RESET).addClass("affix");var t=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-t},l.prototype.checkPositionWithEventLoop=function(){setTimeout(c.proxy(this.checkPosition,this),1)},l.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,e=i.top,s=i.bottom,o=Math.max(c(document).height(),c(document.body).height());"object"!=typeof i&&(s=e=i),"function"==typeof e&&(e=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var n=this.getState(o,t,e,s);if(this.affixed!=n){null!=this.unpin&&this.$element.css("top","");var a="affix"+(n?"-"+n:""),r=c.Event(a+".bs.affix");if(this.$element.trigger(r),r.isDefaultPrevented())return;this.affixed=n,this.unpin="bottom"==n?this.getPinnedOffset():null,this.$element.removeClass(l.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}"bottom"==n&&this.$element.offset({top:o-t-s})}};var t=c.fn.affix;c.fn.affix=e,c.fn.affix.Constructor=l,c.fn.affix.noConflict=function(){return c.fn.affix=t,this},c(window).on("load",function(){c('[data-spy="affix"]').each(function(){var t=c(this),i=t.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(t,i)})})}(jQuery),function(){var a=[],r=[],c=[],l=0,f=0;function u(){var t=$("audio")[0];if(t.paused){$(".music-player-control").css("background","url(/load.png) 0% 0% / cover"),t.play();var i=20*(l-f)-5+"px";$(".music-player-control").css("background","url(/pause.png) 0% 0% / cover"),$(".my-music_list-current").css("visibility","visible"),$(".my-music_list-current").css("top",i)}else t.pause(),$(".music-player-control").css("background","url(/play.png) 0% 0% / cover"),$(".my-music_list-current").css("visibility","hidden")}function p(){f=Math.floor(Math.random()*(a.length-4)),l=f;var t=$(".my-music_list"),i="",e="url("+a[f].pic+") 0% 0% / cover",s=c.slice(f,f+4).join(",");$(".music-player_logo").css("background",e),$(".music-player_txt").html(a[f].name);for(var o=f;o<f+4;o++){var n=a[o];i+=o===f?"<li class='current-play' data-index="+o+" data-id="+n.id+">"+n.name+"</li>":"<li data-index="+o+" data-id="+n.id+">"+n.name+"</li>"}$(".my-music_list li").remove(),t.append(i),$.ajax({url:"http://project.sharelab.club:163/song/url?id="+s,type:"GET",success:function(t){t=t.data;for(var i=0;i<t.length;i++)r.push(t[i]);r=function(t,i){for(var e=[],s=0;s<4;s++)for(var o=i[s],n=0;n<4;n++)o==t[n].id&&e.push(t[n].url);return e}(r,s.split(",")),$("audio")[0].src=r[0]}}),$("audio").bind("ended",function(){if(l<f+3){$(".my-music_list li")[l-f].className="",l++,$(".my-music_list li")[l-f].className="current-play",$("audio")[0].src=r[l-f];var t="url("+a[l].pic+") 0% 0% / cover";$(".music-player_logo").css("background",t),$(".music-player_txt").html(a[l].name),u()}else this.load(),$(".my-music_list-current").css("visibility","hidden"),$(".music-player-control").css("background","url(/play.png) 0% 0% / cover")}),$(".reflash-music").click(function(){p()}),$(".music-player-control").click(function(){u()}),$(".my-music_list li").click(function(){$(".my-music_list li")[l-f].className="",l=this.dataset.index,$(".my-music_list li")[l-f].className="current-play";var t="url("+a[l].pic+") 0% 0% / cover";$(".music-player_logo").css("background",t),$(".music-player_txt").html(a[l].name),$("audio")[0].src=r[l-f],u()})}$.ajax({url:"http://project.sharelab.club:163/user/record?uid=567470691&type=1",type:"GET",success:function(t){if(200===t.code){t=t.weekData;for(var i=0;i<t.length;i++){var e={};e.name=t[i].song.name+" - "+t[i].song.ar[0].name,e.id=t[i].song.id,e.pic=t[i].song.al.picUrl,a.push(e),c.push(t[i].song.id)}}p()},error:function(t){}})}($);